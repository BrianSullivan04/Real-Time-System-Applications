# Application 2 Analysis
### Question 1 Task Timing and Jitter:

The LED blinks and the alert messages occur at almost always at the same interval, but periodically will take longer. This drift never occured with the sensor readings which always had a period of 500ms. This is because the sensor uses the vTaskDelayUntil function which takes in 2 parameters, the last wake time and the desired period ticks. The function then adds the two values to get the absolute tick count of when the task should run, while also updating the last wake time ensuring that it runs at the same period every time. The jitter occurs in the blink and print tasks because they use vTaskDelay which only takes in one parameter which is the desired delay. It does not take into account how much time has passed executing other tasks or operations in the loop, which leads to the longer periods. For example, the print and blink task are lower priority than the sensor task so if the sensor task takes extra time it will block the lower priority tasks causing thier period to be longer because vTaskDelay does not take that extra run time from the sensor into consideration. 

### Question 2 Priority-Based Preemption:

If the sensor task and the print task are ready simultaneously the sensor task will take priority and run before the print task. This is due to the FreeRTOS's preemtive scheduling where even if the print task was in the middle of executing and then the sensor task become ready, the scheduler would pause the print task and run the sensor task and then go back and complete the paused print task. For example, if the print task executed at 5000ms and at 5002ms the sensor task was ready, then the sensor task would run immediately at 5002ms until it was complete. Then the scheduler would return to print task and complete it. 

### Question 3 Effect of Task Execution Time: 

If the sensor task execution time exceeds its period then it would be holding the CPU power for too long and starve the lower priority print and blink task. This would cause the LED and print task to execute in uneven intervals and miss deadlines which is not acceptable in a RTS application. Efforts that programmers could take to fix this would first be utilizing both cores on the ESP32 and pinning the sensor task to one core and the print and blink task on another core. This would give the sensor its own CPU to use and would run independently of the print and blink task preventing the starvation. Alternatively you could try and reduce the workload of the sensor by making it more efficient or extending its period. 

### Question 4 vTaskDelay vs vTaskDelayUntil: 

We chose vTaskDelayUntil for the sensor task instead of vTaskDelay because we needed it to sample the lux precisely every 500ms with no room for error. vTaskDelayUntil allows us to do this because it takes into account the execution time in between the calling of each task. If a higher priority task runs longer than expected or a loop runs longer than expected, vTaskDelayUntil will calculate the elapsed time and ensure that the task still runs at the designated period. If we used vTaskDelay instead for the sensor then it may miss a deadline and function at 510ms or 520ms which could lead to innacurate readings which is unacceptable for a RTS. Using vTaskDelay for the LED blink task is acceptable because the blinking LED is simply an indicator that the system is working and if it is off my 10ms-30ms that wont drastically effect the operation of the RTS. 

### Question 5 Thematic Integration Reflection:

In the space scenerio the sensor task can represent a light sensor that is constantly checking solar intensity. This is useful for determining if the satellite is entering an eclipse which could lead to the solar panels not getting sufficient sunlight to power the ship. Due to the importance of this task it will be the highest priority task. The console print task mimics a telemetry reporting system that gives the data occumulated from the satellite to grounds crew as well as periodic updates. This task will be in the middle of importance because the data is valuable and returning it to grounds crew is more important than having the LED blink. Lastly, the blinking LED can represent a beacon on the satellite that signifies that the satellite is functioning correctly. This is least important on the scheduler because if the LED blinks slightly late it will not effect any data or how the satellite is operating. 